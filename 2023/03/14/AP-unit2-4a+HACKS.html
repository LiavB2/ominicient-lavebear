<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="twitter:card" content="summary_large_image" /><!-- Begin Jekyll SEO tag v2.8.0 -->
<title>Unit 2.4a Using Programs with Data, SQLAlchemy (NB + Notes + My Project Application + Hacks) | LB Blogs</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Unit 2.4a Using Programs with Data, SQLAlchemy (NB + Notes + My Project Application + Hacks)" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Using Programs with Data is focused on SQL and database actions. Part A focuses on SQLAlchemy and an OOP programming style," />
<meta property="og:description" content="Using Programs with Data is focused on SQL and database actions. Part A focuses on SQLAlchemy and an OOP programming style," />
<link rel="canonical" href="https://liavb2.github.io/ominicient-lavebear/2023/03/14/AP-unit2-4a+HACKS.html" />
<meta property="og:url" content="https://liavb2.github.io/ominicient-lavebear/2023/03/14/AP-unit2-4a+HACKS.html" />
<meta property="og:site_name" content="LB Blogs" />
<meta property="og:image" content="https://liavb2.github.io/ominicient-lavebear/images/python.png" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2023-03-14T00:00:00-05:00" />
<meta name="twitter:card" content="summary_large_image" />
<meta property="twitter:image" content="https://liavb2.github.io/ominicient-lavebear/images/python.png" />
<meta property="twitter:title" content="Unit 2.4a Using Programs with Data, SQLAlchemy (NB + Notes + My Project Application + Hacks)" />
<script type="application/ld+json">
{"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2023-03-14T00:00:00-05:00","datePublished":"2023-03-14T00:00:00-05:00","description":"Using Programs with Data is focused on SQL and database actions. Part A focuses on SQLAlchemy and an OOP programming style,","headline":"Unit 2.4a Using Programs with Data, SQLAlchemy (NB + Notes + My Project Application + Hacks)","image":"https://liavb2.github.io/ominicient-lavebear/images/python.png","mainEntityOfPage":{"@type":"WebPage","@id":"https://liavb2.github.io/ominicient-lavebear/2023/03/14/AP-unit2-4a+HACKS.html"},"url":"https://liavb2.github.io/ominicient-lavebear/2023/03/14/AP-unit2-4a+HACKS.html"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/ominicient-lavebear/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://liavb2.github.io/ominicient-lavebear/feed.xml" title="LB Blogs" /><link rel="shortcut icon" type="image/x-icon" href="/ominicient-lavebear/images/favicon.ico"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Primer/15.2.0/primer.css" integrity="sha512-xTz2ys4coGAOz8vuV1NcQBkgVmKhsSEtjbqyMJbBHRplFuvKIUo6xhLHpAyPt9mfR6twHJgn9OgVLuqOvjeBhg==" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.14.0/css/all.min.css" integrity="sha512-1PKOgIY59xJ8Co8+NE6FZ+LOAZKjy+KY8iq0G4B3CyeY6wYHN3yt9PW0XpSriVlkMXe40PTKnXrLnZ9+fkDaog==" crossorigin="anonymous" />

<script>
function wrap_img(fn) {
    if (document.attachEvent ? document.readyState === "complete" : document.readyState !== "loading") {
        var elements = document.querySelectorAll(".post img");
        Array.prototype.forEach.call(elements, function(el, i) {
            if (el.getAttribute("title") && (el.className != "emoji")) {
                const caption = document.createElement('figcaption');
                var node = document.createTextNode(el.getAttribute("title"));
                caption.appendChild(node);
                const wrapper = document.createElement('figure');
                wrapper.className = 'image';
                el.parentNode.insertBefore(wrapper, el);
                el.parentNode.removeChild(el);
                wrapper.appendChild(el);
                wrapper.appendChild(caption);
            }
        });
    } else { document.addEventListener('DOMContentLoaded', fn); }
}
window.onload = wrap_img;
</script>

<script>
    document.addEventListener("DOMContentLoaded", function(){
    // add link icon to anchor tags
    var elem = document.querySelectorAll(".anchor-link")
    elem.forEach(e => (e.innerHTML = '<i class="fas fa-link fa-xs"></i>'));
    });
</script>
</head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/ominicient-lavebear/">LB Blogs</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/ominicient-lavebear/about/">About Creator</a><a class="page-link" href="/ominicient-lavebear/notes/">Notes</a><a class="page-link" href="/ominicient-lavebear/search/">Search</a><a class="page-link" href="/ominicient-lavebear/categories/">Tags</a><a class="page-link" href="/ominicient-lavebear/lesson_notes/">Lesson Notes</a><a class="page-link" href="/ominicient-lavebear/vocab/">Tri 2 Vocab</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Unit 2.4a Using Programs with Data, SQLAlchemy (NB + Notes + My Project Application + Hacks)</h1><p class="page-description">Using Programs with Data is focused on SQL and database actions.  Part A focuses on SQLAlchemy and an OOP programming style,</p><p class="post-meta post-meta-title"><time class="dt-published" datetime="2023-03-14T00:00:00-05:00" itemprop="datePublished">
        Mar 14, 2023
      </time>
       • <span class="read-time" title="Estimated read time">
    
    
      14 min read
    
</span></p>

    

    
      
        <div class="pb-5 d-flex flex-justify-center">
          <div class="px-2">

    <a href="https://github.com/LiavB2/ominicient-lavebear/tree/master/_notebooks/2023-03-14-AP-unit2-4a+HACKS.ipynb" role="button" target="_blank">
<img class="notebook-badge-image" src="/ominicient-lavebear/assets/badges/github.svg" alt="View On GitHub">
    </a>
</div>

          <div class="px-2">
    <a href="https://mybinder.org/v2/gh/LiavB2/ominicient-lavebear/master?filepath=_notebooks%2F2023-03-14-AP-unit2-4a%2BHACKS.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/ominicient-lavebear/assets/badges/binder.svg" alt="Open In Binder"/>
    </a>
</div>

          <div class="px-2">
    <a href="https://colab.research.google.com/github/LiavB2/ominicient-lavebear/blob/master/_notebooks/2023-03-14-AP-unit2-4a+HACKS.ipynb" target="_blank">
        <img class="notebook-badge-image" src="/ominicient-lavebear/assets/badges/colab.svg" alt="Open In Colab"/>
    </a>
</div>
          <div class="px-2">
  <a href="https://deepnote.com/launch?url=https%3A%2F%2Fgithub.com%2FLiavB2%2Fominicient-lavebear%2Fblob%2Fmaster%2F_notebooks%2F2023-03-14-AP-unit2-4a%2BHACKS.ipynb" target="_blank">
      <img class="notebook-badge-image" src="/ominicient-lavebear/assets/badges/deepnote.svg" alt="Launch in Deepnote"/>
  </a>
</div>

        </div>
      </header>

  <div class="post-content e-content" itemprop="articleBody">
    <ul id="toc" class="section-nav">
<li class="toc-entry toc-h1"><a href="#Database-and-SQLAlchemy">Database and SQLAlchemy </a>
<ul>
<li class="toc-entry toc-h2"><a href="#Imports-and-Flask-Objects">Imports and Flask Objects </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Notes">Notes </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#APP-and-DB-are-objects-we-have-been-using-all-year">APP and DB are objects we have been using all year </a></li>
<li class="toc-entry toc-h2"><a href="#Model-Definition">Model Definition </a></li>
<li class="toc-entry toc-h2"><a href="#Initial-Data">Initial Data </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Notes">Notes </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Check-for-given-Credentials-in-users-table-in-sqlite.db">Check for given Credentials in users table in sqlite.db </a></li>
<li class="toc-entry toc-h2"><a href="#>-Use-of-ORM-Query-object-and-custom-methods-to-identify-user-to-credentials-uid-and-password">&gt; Use of ORM Query object and custom methods to identify user to credentials uid and password </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Notes">Notes </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Create-a-new-User-in-table-in-Sqlite.db">Create a new User in table in Sqlite.db </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Notes">Notes </a></li>
</ul>
</li>
<li class="toc-entry toc-h2"><a href="#Reading-users-table-in-sqlite.db">Reading users table in sqlite.db </a>
<ul>
<li class="toc-entry toc-h3"><a href="#Notes">Notes </a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-entry toc-h1"><a href="#Hacks">Hacks </a></li>
</ul><!--
#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: _notebooks/2023-03-14-AP-unit2-4a+HACKS.ipynb
-->

<div class="container" id="notebook-container">
        
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Database-and-SQLAlchemy">
<a class="anchor" href="#Database-and-SQLAlchemy" aria-hidden="true"><span class="octicon octicon-link"></span></a>Database and SQLAlchemy<a class="anchor-link" href="#Database-and-SQLAlchemy"> </a>
</h1>
<blockquote>
<p>In this blog we will explore using programs with data, focused on Databases.  We will use SQLite Database to learn more about using Programs with Data.  <strong><em>Use Debugging through these examples to examine Objects created in Code</em></strong>.</p>
</blockquote>
<ul>
<li>
<p>College Board talks about ideas like</p>
<ul>
<li>Program Usage. "iterative and interactive way when processing information"</li>
<li>Managing Data.  "classifying data are part of the process in using programs", "data files in a Table"</li>
<li>Insight "insight and knowledge can be obtained from ...  digitally represented information"</li>
<li>Filter systems. 'tools for finding information and recognizing patterns"</li>
<li>Application. "the preserve has two databases", "an employee wants to count the number of book"</li>
</ul>
</li>
<li>
<p>PBL, Databases, Iterative/OOP</p>
<ul>
<li>Iterative. Refers to a sequence of instructions or code being repeated until a specific end result is achieved</li>
<li>OOP. A computer programming model that organizes software design around data, or objects, rather than functions and logic</li>
<li>SQL. Structured Query Language, abbreviated as SQL, is a language used in programming, managing, and structuring data </li>
</ul>
</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Imports-and-Flask-Objects">
<a class="anchor" href="#Imports-and-Flask-Objects" aria-hidden="true"><span class="octicon octicon-link"></span></a>Imports and Flask Objects<a class="anchor-link" href="#Imports-and-Flask-Objects"> </a>
</h2>
<blockquote>
<p>Defines and key object creations</p>
</blockquote>
<ul>
<li>Comment on where you have observed these working?  Provide a defintion of purpose.<ol>
<li>Flask app object<ul>
<li>This Flask app object app object containss the routs and blueprints that reside to the HTTP server in the Flask</li>
</ul>
</li>
<li>SQLAlchemy db object<ul>
<li>THe method where the SQLite database interaccts with an ergonomic ORM (Object Relational Mapping (ORM) is a technique used in creating a "bridge" between object-oriented programs and, in most cases, relational database) in the SQAlchemy db object.</li>
</ul>
</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="sd">"""</span>
<span class="sd">These imports define the key objects</span>
<span class="sd">"""</span>

<span class="kn">from</span> <span class="nn">flask</span> <span class="kn">import</span> <span class="n">Flask</span>
<span class="kn">from</span> <span class="nn">flask_sqlalchemy</span> <span class="kn">import</span> <span class="n">SQLAlchemy</span>

<span class="sd">"""</span>
<span class="sd">These object and definitions are used throughout the Jupyter Notebook.</span>
<span class="sd">"""</span>

<span class="c1"># Setup of key Flask object (app)</span>
<span class="n">app</span> <span class="o">=</span> <span class="n">Flask</span><span class="p">(</span><span class="vm">__name__</span><span class="p">)</span>
<span class="c1"># Setup SQLAlchemy object and properties for the database (db)</span>
<span class="n">database</span> <span class="o">=</span> <span class="s1">'sqlite:///sqlite.db'</span>  <span class="c1"># path and filename of database</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'SQLALCHEMY_TRACK_MODIFICATIONS'</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'SQLALCHEMY_DATABASE_URI'</span><span class="p">]</span> <span class="o">=</span> <span class="n">database</span>
<span class="n">app</span><span class="o">.</span><span class="n">config</span><span class="p">[</span><span class="s1">'SECRET_KEY'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'SECRET_KEY'</span>
<span class="n">db</span> <span class="o">=</span> <span class="n">SQLAlchemy</span><span class="p">()</span>


<span class="c1"># This belongs in place where it runs once per project</span>
<span class="n">db</span><span class="o">.</span><span class="n">init_app</span><span class="p">(</span><span class="n">app</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Notes">
<a class="anchor" href="#Notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes<a class="anchor-link" href="#Notes"> </a>
</h3>
<ul>
<li>Setting up variables</li>
<li>Setting up DB</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="APP-and-DB-are-objects-we-have-been-using-all-year">
<a class="anchor" href="#APP-and-DB-are-objects-we-have-been-using-all-year" aria-hidden="true"><span class="octicon octicon-link"></span></a>APP and DB are objects we have been using all year<a class="anchor-link" href="#APP-and-DB-are-objects-we-have-been-using-all-year"> </a>
</h2>
<ul>
<li>APP and the db Alchemy, this data is getting assinged into this object</li>
<li>Flask is a template and we havent assigned anything to it yet.</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Model-Definition">
<a class="anchor" href="#Model-Definition" aria-hidden="true"><span class="octicon octicon-link"></span></a>Model Definition<a class="anchor-link" href="#Model-Definition"> </a>
</h2>
<blockquote>
<p>Define columns, initialization, and CRUD methods for users table in sqlite.db</p>
</blockquote>
<ul>
<li>
<p>Comment on these items in the class, purpose and defintion.</p>
<ul>
<li>class User<ul>
<li>Class user is defining the template for user. It is a class definition template. WE use this template to create objects like user.</li>
<li>We need a user template because we have different users, but we shouldn't start from scratch for each one. </li>
</ul>
</li>
<li>db.Model inheritance<ul>
<li>Defining a class is called inheritance. For class user we are inheriting the ability for out class to use databast properties, methods, and attributes. The code is defined somewhere else but we are going to inherit all the properties.</li>
<li>Since we inherited these methods, we are able to use them to add to our template.</li>
</ul>
</li>
<li>
<em>init</em> method<ul>
<li>Usually called "constructor" and means that the init method is used to help us instantiate an object from our class user template.</li>
<li>With the init method we look at U1 and we bas username, ID, etc. The init method will set the properties as attributes are parameters that instantuate a U1 object. </li>
</ul>
</li>
<li>
<code>@property</code>, <code>@&lt;column&gt;.setter</code><ul>
<li>We want to see what is inside as well as change the attribute once we created them (setters and getters).<ul>
<li>setters let us change the attriubtes, getters allow us to retrive data out of the object.</li>
</ul>
</li>
</ul>
</li>
<li>
<p>create, read, update, delete methods</p>
<ul>
<li>typicly when you create a class you use these methods in order to make it easier to interact with the properties of the database.</li>
</ul>
</li>
<li>
<p>This next code is a definition template, so we wont get a response out of it</p>
<ul>
<li>it is a point of reference as of now, becuase we have not referenced or instantuatied it yet.</li>
</ul>
</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">class</span> <span class="nc">etrack_user</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
    <span class="n">__tablename__</span> <span class="o">=</span> <span class="s1">'etrack_users'</span>  <span class="c1"># table name is plural, class name is singular</span>
    <span class="c1"># Define the User schema with "vars" from object</span>
    <span class="n">_date</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">String</span><span class="p">(</span><span class="mi">255</span><span class="p">),</span> <span class="n">primary_key</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="n">_savedWorkouts</span> <span class="o">=</span> <span class="n">db</span><span class="o">.</span><span class="n">Column</span><span class="p">(</span><span class="n">db</span><span class="o">.</span><span class="n">PickleType</span><span class="p">,</span> <span class="n">unique</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">nullable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">savedWorkouts</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_savedWorkouts</span> <span class="o">=</span> <span class="n">savedWorkouts</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">date</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_date</span>
    
    <span class="nd">@date</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">date</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_date</span> <span class="o">=</span> <span class="n">date</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">savedWorkouts</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_savedWorkouts</span>

    <span class="nd">@savedWorkouts</span><span class="o">.</span><span class="n">setter</span>
    <span class="k">def</span> <span class="nf">savedWorkouts</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">savedWorkouts</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_savedWorkouts</span> <span class="o">=</span> <span class="n">savedWorkouts</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">dictionary</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="nb">dict</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">"date"</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
            <span class="s2">"saved workouts"</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">savedWorkouts</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">dict</span>

    <span class="k">def</span> <span class="fm">__str__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">dictionary</span><span class="p">)</span>
    
    <span class="k">def</span> <span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="sa">f</span><span class="s1">'etrack_user(date=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_date</span><span class="si">}</span><span class="s1">, savedWorkouts=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">_savedWorkouts</span><span class="si">}</span><span class="s1">)'</span>


    <span class="c1"># CRUD stuff</span>
    <span class="k">def</span> <span class="nf">create</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="c1"># creates a person object from User(db.Model) class, passes initializers</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>  <span class="c1"># add prepares to persist person object to Users table</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>  <span class="c1"># SqlAlchemy "unit of work pattern" requires a manual commit</span>
            <span class="k">return</span> <span class="bp">self</span>
        <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
            <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
            <span class="k">return</span> <span class="kc">None</span>

    <span class="c1"># CRUD read converts self to dictionary</span>
    <span class="c1"># returns dictionary</span>
    <span class="k">def</span> <span class="nf">read</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">"date"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">date</span><span class="p">,</span>
            <span class="s2">"savedWorkouts"</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">savedWorkouts</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="c1"># CRUD update: updates user name, password, phone</span>
    <span class="c1"># returns self</span>
    <span class="k">def</span> <span class="nf">update</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">date</span><span class="p">,</span> <span class="n">savedWorkouts</span><span class="p">):</span>
        <span class="sd">"""only updates values with length"""</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">date</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">date</span> <span class="o">=</span> <span class="n">date</span>
        <span class="c1"># if len(savedWorkouts) &gt; 0:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">savedWorkouts</span> <span class="o">=</span> <span class="n">savedWorkouts</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="bp">self</span>

    <span class="c1"># CRUD delete: remove self</span>
    <span class="c1"># None</span>
    <span class="k">def</span> <span class="nf">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">delete</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">commit</span><span class="p">()</span>
        <span class="k">return</span> <span class="kc">None</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Initial-Data">
<a class="anchor" href="#Initial-Data" aria-hidden="true"><span class="octicon octicon-link"></span></a>Initial Data<a class="anchor-link" href="#Initial-Data"> </a>
</h2>
<blockquote>
<p>Uses SQLALchemy db.create_all() to initialize rows into sqlite.db</p>
</blockquote>
<ul>
<li>Comment on how these work?<ol>
<li>Create All Tables from db Object<ul>
<li>The db.create_all() method on the db object creates all the relevant SQL tables based on the defined models.</li>
</ul>
</li>
<li>User Object Constructors<ul>
<li>Instantaniate the instance of the user class with the specific parameters</li>
</ul>
</li>
<li>Try / Except <ul>
<li>Finds python exceptions that could possibly be found and print an error messaage if any of these are caught.</li>
</ul>
</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">initEtrackUsers</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="c1"># db.init_app(app)</span>
        <span class="n">db</span><span class="o">.</span><span class="n">create_all</span><span class="p">()</span>
        <span class="n">r1</span> <span class="o">=</span> <span class="n">etrack_user</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="s2">"25 February 2023"</span> <span class="p">,</span> <span class="n">savedWorkouts</span> <span class="o">=</span> <span class="p">[</span><span class="s2">"This is a test of the new table"</span><span class="p">])</span>

        <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="n">r1</span><span class="p">]</span>

        <span class="sd">"""Builds sample user/note(s) data"""</span>
        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">row</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="k">except</span> <span class="n">IntegrityError</span><span class="p">:</span>
                <span class="sd">'''fails with bad or duplicate data'''</span>
                <span class="n">db</span><span class="o">.</span><span class="n">session</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Records exist, duplicate username, or error: </span><span class="si">{</span><span class="n">row</span><span class="o">.</span><span class="n">date</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
<span class="n">initEtrackUsers</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_text output_error">
<pre>
<span class="ansi-red-fg">---------------------------------------------------------------------------</span>
<span class="ansi-red-fg">IntegrityError</span>                            Traceback (most recent call last)
File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1964</span>, in <span class="ansi-cyan-fg">Connection._exec_single_context</span><span class="ansi-blue-fg">(self, dialect, context, statement, parameters)</span>
<span class="ansi-green-intense-fg ansi-bold">   1963</span>     if not evt_handled:
<span class="ansi-green-fg">-&gt; 1964</span>         self.dialect.do_execute(
<span class="ansi-green-intense-fg ansi-bold">   1965</span>             cursor, str_statement, effective_parameters, context
<span class="ansi-green-intense-fg ansi-bold">   1966</span>         )
<span class="ansi-green-intense-fg ansi-bold">   1968</span> if self._has_events or self.engine._has_events:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/default.py:748</span>, in <span class="ansi-cyan-fg">DefaultDialect.do_execute</span><span class="ansi-blue-fg">(self, cursor, statement, parameters, context)</span>
<span class="ansi-green-intense-fg ansi-bold">    747</span> def do_execute(self, cursor, statement, parameters, context=None):
<span class="ansi-green-fg">--&gt; 748</span>     cursor.execute(statement, parameters)

<span class="ansi-red-fg">IntegrityError</span>: UNIQUE constraint failed: etrack_users._date

The above exception was the direct cause of the following exception:

<span class="ansi-red-fg">IntegrityError</span>                            Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a+HACKS.ipynb Cell 10</span> in <span class="ansi-cyan-fg">etrack_user.create</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=45'&gt;46&lt;/a&gt;</span> db.session.add(self)  # add prepares to persist person object to Users table
<span class="ansi-green-fg">---&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=46'&gt;47&lt;/a&gt;</span> db.session.commit()  # SqlAlchemy "unit of work pattern" requires a manual commit
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=47'&gt;48&lt;/a&gt;</span> return self

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/scoping.py:553</span>, in <span class="ansi-cyan-fg">scoped_session.commit</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    515</span> r"""Flush pending changes and commit the current transaction.
<span class="ansi-green-intense-fg ansi-bold">    516</span> 
<span class="ansi-green-intense-fg ansi-bold">    517</span> .. container:: class_bases
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">    550</span> 
<span class="ansi-green-intense-fg ansi-bold">    551</span> """  # noqa: E501
<span class="ansi-green-fg">--&gt; 553</span> return self._proxied.commit()

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:1903</span>, in <span class="ansi-cyan-fg">Session.commit</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   1901</span>     trans = self._autobegin_t()
<span class="ansi-green-fg">-&gt; 1903</span> trans.commit(_to_root=True)

File <span class="ansi-green-fg">&lt;string&gt;:2</span>, in <span class="ansi-cyan-fg">commit</span><span class="ansi-blue-fg">(self, _to_root)</span>

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py:137</span>, in <span class="ansi-cyan-fg">_StateChange.declare_states.&lt;locals&gt;._go</span><span class="ansi-blue-fg">(fn, self, *arg, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    136</span> try:
<span class="ansi-green-fg">--&gt; 137</span>     ret_value = fn(self, *arg, **kw)
<span class="ansi-green-intense-fg ansi-bold">    138</span> except:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:1218</span>, in <span class="ansi-cyan-fg">SessionTransaction.commit</span><span class="ansi-blue-fg">(self, _to_root)</span>
<span class="ansi-green-intense-fg ansi-bold">   1217</span>     with self._expect_state(SessionTransactionState.PREPARED):
<span class="ansi-green-fg">-&gt; 1218</span>         self._prepare_impl()
<span class="ansi-green-intense-fg ansi-bold">   1220</span> if self._parent is None or self.nested:

File <span class="ansi-green-fg">&lt;string&gt;:2</span>, in <span class="ansi-cyan-fg">_prepare_impl</span><span class="ansi-blue-fg">(self)</span>

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/state_changes.py:137</span>, in <span class="ansi-cyan-fg">_StateChange.declare_states.&lt;locals&gt;._go</span><span class="ansi-blue-fg">(fn, self, *arg, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">    136</span> try:
<span class="ansi-green-fg">--&gt; 137</span>     ret_value = fn(self, *arg, **kw)
<span class="ansi-green-intense-fg ansi-bold">    138</span> except:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:1193</span>, in <span class="ansi-cyan-fg">SessionTransaction._prepare_impl</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">   1192</span>         break
<span class="ansi-green-fg">-&gt; 1193</span>     self.session.flush()
<span class="ansi-green-intense-fg ansi-bold">   1194</span> else:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:4155</span>, in <span class="ansi-cyan-fg">Session.flush</span><span class="ansi-blue-fg">(self, objects)</span>
<span class="ansi-green-intense-fg ansi-bold">   4154</span>     self._flushing = True
<span class="ansi-green-fg">-&gt; 4155</span>     self._flush(objects)
<span class="ansi-green-intense-fg ansi-bold">   4156</span> finally:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:4292</span>, in <span class="ansi-cyan-fg">Session._flush</span><span class="ansi-blue-fg">(self, objects)</span>
<span class="ansi-green-intense-fg ansi-bold">   4291</span> with util.safe_reraise():
<span class="ansi-green-fg">-&gt; 4292</span>     transaction.rollback(_capture_exception=True)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/util/langhelpers.py:147</span>, in <span class="ansi-cyan-fg">safe_reraise.__exit__</span><span class="ansi-blue-fg">(self, type_, value, traceback)</span>
<span class="ansi-green-intense-fg ansi-bold">    146</span>     self._exc_info = None  # remove potential circular references
<span class="ansi-green-fg">--&gt; 147</span>     raise exc_value.with_traceback(exc_tb)
<span class="ansi-green-intense-fg ansi-bold">    148</span> else:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/session.py:4252</span>, in <span class="ansi-cyan-fg">Session._flush</span><span class="ansi-blue-fg">(self, objects)</span>
<span class="ansi-green-intense-fg ansi-bold">   4251</span> try:
<span class="ansi-green-fg">-&gt; 4252</span>     flush_context.execute()
<span class="ansi-green-intense-fg ansi-bold">   4253</span> finally:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py:467</span>, in <span class="ansi-cyan-fg">UOWTransaction.execute</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">    466</span> for rec in topological.sort(self.dependencies, postsort_actions):
<span class="ansi-green-fg">--&gt; 467</span>     rec.execute(self)

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/unitofwork.py:644</span>, in <span class="ansi-cyan-fg">SaveUpdateAll.execute</span><span class="ansi-blue-fg">(self, uow)</span>
<span class="ansi-green-intense-fg ansi-bold">    642</span> @util.preload_module("sqlalchemy.orm.persistence")
<span class="ansi-green-intense-fg ansi-bold">    643</span> def execute(self, uow):
<span class="ansi-green-fg">--&gt; 644</span>     util.preloaded.orm_persistence.save_obj(
<span class="ansi-green-intense-fg ansi-bold">    645</span>         self.mapper,
<span class="ansi-green-intense-fg ansi-bold">    646</span>         uow.states_for_mapper_hierarchy(self.mapper, False, False),
<span class="ansi-green-intense-fg ansi-bold">    647</span>         uow,
<span class="ansi-green-intense-fg ansi-bold">    648</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py:93</span>, in <span class="ansi-cyan-fg">save_obj</span><span class="ansi-blue-fg">(base_mapper, states, uowtransaction, single)</span>
<span class="ansi-green-intense-fg ansi-bold">     85</span>     _emit_update_statements(
<span class="ansi-green-intense-fg ansi-bold">     86</span>         base_mapper,
<span class="ansi-green-intense-fg ansi-bold">     87</span>         uowtransaction,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">     90</span>         update,
<span class="ansi-green-intense-fg ansi-bold">     91</span>     )
<span class="ansi-green-fg">---&gt; 93</span>     _emit_insert_statements(
<span class="ansi-green-intense-fg ansi-bold">     94</span>         base_mapper,
<span class="ansi-green-intense-fg ansi-bold">     95</span>         uowtransaction,
<span class="ansi-green-intense-fg ansi-bold">     96</span>         mapper,
<span class="ansi-green-intense-fg ansi-bold">     97</span>         table,
<span class="ansi-green-intense-fg ansi-bold">     98</span>         insert,
<span class="ansi-green-intense-fg ansi-bold">     99</span>     )
<span class="ansi-green-intense-fg ansi-bold">    101</span> _finalize_insert_update_commands(
<span class="ansi-green-intense-fg ansi-bold">    102</span>     base_mapper,
<span class="ansi-green-intense-fg ansi-bold">    103</span>     uowtransaction,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">    119</span>     ),
<span class="ansi-green-intense-fg ansi-bold">    120</span> )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/orm/persistence.py:1020</span>, in <span class="ansi-cyan-fg">_emit_insert_statements</span><span class="ansi-blue-fg">(base_mapper, uowtransaction, mapper, table, insert, bookkeeping, use_orm_insert_stmt, execution_options)</span>
<span class="ansi-green-intense-fg ansi-bold">   1018</span> multiparams = [rec[2] for rec in records]
<span class="ansi-green-fg">-&gt; 1020</span> result = connection.execute(
<span class="ansi-green-intense-fg ansi-bold">   1021</span>     statement, multiparams, execution_options=execution_options
<span class="ansi-green-intense-fg ansi-bold">   1022</span> )
<span class="ansi-green-intense-fg ansi-bold">   1023</span> if bookkeeping:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1414</span>, in <span class="ansi-cyan-fg">Connection.execute</span><span class="ansi-blue-fg">(self, statement, parameters, execution_options)</span>
<span class="ansi-green-intense-fg ansi-bold">   1413</span> else:
<span class="ansi-green-fg">-&gt; 1414</span>     return meth(
<span class="ansi-green-intense-fg ansi-bold">   1415</span>         self,
<span class="ansi-green-intense-fg ansi-bold">   1416</span>         distilled_parameters,
<span class="ansi-green-intense-fg ansi-bold">   1417</span>         execution_options or NO_OPTIONS,
<span class="ansi-green-intense-fg ansi-bold">   1418</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/sql/elements.py:486</span>, in <span class="ansi-cyan-fg">ClauseElement._execute_on_connection</span><span class="ansi-blue-fg">(self, connection, distilled_params, execution_options)</span>
<span class="ansi-green-intense-fg ansi-bold">    485</span>         assert isinstance(self, Executable)
<span class="ansi-green-fg">--&gt; 486</span>     return connection._execute_clauseelement(
<span class="ansi-green-intense-fg ansi-bold">    487</span>         self, distilled_params, execution_options
<span class="ansi-green-intense-fg ansi-bold">    488</span>     )
<span class="ansi-green-intense-fg ansi-bold">    489</span> else:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1638</span>, in <span class="ansi-cyan-fg">Connection._execute_clauseelement</span><span class="ansi-blue-fg">(self, elem, distilled_parameters, execution_options)</span>
<span class="ansi-green-intense-fg ansi-bold">   1630</span> compiled_sql, extracted_params, cache_hit = elem._compile_w_cache(
<span class="ansi-green-intense-fg ansi-bold">   1631</span>     dialect=dialect,
<span class="ansi-green-intense-fg ansi-bold">   1632</span>     compiled_cache=compiled_cache,
<span class="ansi-green-fg">   (...)</span>
<span class="ansi-green-intense-fg ansi-bold">   1636</span>     linting=self.dialect.compiler_linting | compiler.WARN_LINTING,
<span class="ansi-green-intense-fg ansi-bold">   1637</span> )
<span class="ansi-green-fg">-&gt; 1638</span> ret = self._execute_context(
<span class="ansi-green-intense-fg ansi-bold">   1639</span>     dialect,
<span class="ansi-green-intense-fg ansi-bold">   1640</span>     dialect.execution_ctx_cls._init_compiled,
<span class="ansi-green-intense-fg ansi-bold">   1641</span>     compiled_sql,
<span class="ansi-green-intense-fg ansi-bold">   1642</span>     distilled_parameters,
<span class="ansi-green-intense-fg ansi-bold">   1643</span>     execution_options,
<span class="ansi-green-intense-fg ansi-bold">   1644</span>     compiled_sql,
<span class="ansi-green-intense-fg ansi-bold">   1645</span>     distilled_parameters,
<span class="ansi-green-intense-fg ansi-bold">   1646</span>     elem,
<span class="ansi-green-intense-fg ansi-bold">   1647</span>     extracted_params,
<span class="ansi-green-intense-fg ansi-bold">   1648</span>     cache_hit=cache_hit,
<span class="ansi-green-intense-fg ansi-bold">   1649</span> )
<span class="ansi-green-intense-fg ansi-bold">   1650</span> if has_events:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1842</span>, in <span class="ansi-cyan-fg">Connection._execute_context</span><span class="ansi-blue-fg">(self, dialect, constructor, statement, parameters, execution_options, *args, **kw)</span>
<span class="ansi-green-intense-fg ansi-bold">   1841</span> else:
<span class="ansi-green-fg">-&gt; 1842</span>     return self._exec_single_context(
<span class="ansi-green-intense-fg ansi-bold">   1843</span>         dialect, context, statement, parameters
<span class="ansi-green-intense-fg ansi-bold">   1844</span>     )

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1983</span>, in <span class="ansi-cyan-fg">Connection._exec_single_context</span><span class="ansi-blue-fg">(self, dialect, context, statement, parameters)</span>
<span class="ansi-green-intense-fg ansi-bold">   1982</span> except BaseException as e:
<span class="ansi-green-fg">-&gt; 1983</span>     self._handle_dbapi_exception(
<span class="ansi-green-intense-fg ansi-bold">   1984</span>         e, str_statement, effective_parameters, cursor, context
<span class="ansi-green-intense-fg ansi-bold">   1985</span>     )
<span class="ansi-green-intense-fg ansi-bold">   1987</span> return result

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:2326</span>, in <span class="ansi-cyan-fg">Connection._handle_dbapi_exception</span><span class="ansi-blue-fg">(self, e, statement, parameters, cursor, context, is_sub_exec)</span>
<span class="ansi-green-intense-fg ansi-bold">   2325</span>     assert sqlalchemy_exception is not None
<span class="ansi-green-fg">-&gt; 2326</span>     raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
<span class="ansi-green-intense-fg ansi-bold">   2327</span> else:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/base.py:1964</span>, in <span class="ansi-cyan-fg">Connection._exec_single_context</span><span class="ansi-blue-fg">(self, dialect, context, statement, parameters)</span>
<span class="ansi-green-intense-fg ansi-bold">   1963</span>     if not evt_handled:
<span class="ansi-green-fg">-&gt; 1964</span>         self.dialect.do_execute(
<span class="ansi-green-intense-fg ansi-bold">   1965</span>             cursor, str_statement, effective_parameters, context
<span class="ansi-green-intense-fg ansi-bold">   1966</span>         )
<span class="ansi-green-intense-fg ansi-bold">   1968</span> if self._has_events or self.engine._has_events:

File <span class="ansi-green-fg">~/anaconda3/lib/python3.9/site-packages/sqlalchemy/engine/default.py:748</span>, in <span class="ansi-cyan-fg">DefaultDialect.do_execute</span><span class="ansi-blue-fg">(self, cursor, statement, parameters, context)</span>
<span class="ansi-green-intense-fg ansi-bold">    747</span> def do_execute(self, cursor, statement, parameters, context=None):
<span class="ansi-green-fg">--&gt; 748</span>     cursor.execute(statement, parameters)

<span class="ansi-red-fg">IntegrityError</span>: (sqlite3.IntegrityError) UNIQUE constraint failed: etrack_users._date
[SQL: INSERT INTO etrack_users (_date, "_savedWorkouts") VALUES (?, ?)]
[parameters: ('25 February 2023', &lt;memory at 0x7ff6f67a1a00&gt;)]
(Background on this error at: https://sqlalche.me/e/20/gkpj)

During handling of the above exception, another exception occurred:

<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a+HACKS.ipynb Cell 10</span> in <span class="ansi-cyan-fg">initEtrackUsers</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=10'&gt;11&lt;/a&gt;</span> try:
<span class="ansi-green-fg">---&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=11'&gt;12&lt;/a&gt;</span>     row.create()
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=12'&gt;13&lt;/a&gt;</span> except IntegrityError:

<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a+HACKS.ipynb Cell 10</span> in <span class="ansi-cyan-fg">etrack_user.create</span><span class="ansi-blue-fg">(self)</span>
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=47'&gt;48&lt;/a&gt;</span>     return self
<span class="ansi-green-fg">---&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=48'&gt;49&lt;/a&gt;</span> except IntegrityError:
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=49'&gt;50&lt;/a&gt;</span>     db.session.remove()

<span class="ansi-red-fg">NameError</span>: name 'IntegrityError' is not defined

During handling of the above exception, another exception occurred:

<span class="ansi-red-fg">NameError</span>                                 Traceback (most recent call last)
<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a+HACKS.ipynb Cell 10</span> in <span class="ansi-cyan-fg">&lt;cell line: 17&gt;</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=14'&gt;15&lt;/a&gt;</span>                 db.session.remove()
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=15'&gt;16&lt;/a&gt;</span>                 print(f"Records exist, duplicate username, or error: {row.date}")
<span class="ansi-green-fg">---&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=16'&gt;17&lt;/a&gt;</span> initEtrackUsers()

<span class="ansi-green-intense-fg ansi-bold">/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a+HACKS.ipynb Cell 10</span> in <span class="ansi-cyan-fg">initEtrackUsers</span><span class="ansi-blue-fg">()</span>
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=10'&gt;11&lt;/a&gt;</span> try:
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=11'&gt;12&lt;/a&gt;</span>     row.create()
<span class="ansi-green-fg">---&gt; &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=12'&gt;13&lt;/a&gt;</span> except IntegrityError:
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=13'&gt;14&lt;/a&gt;</span>     '''fails with bad or duplicate data'''
<span class="ansi-green-intense-fg ansi-bold">     &lt;a href='vscode-notebook-cell://wsl%2Bubuntu/mnt/c/Users/liavb/vscode/ominicient-lavebear/_notebooks/2023-03-14-AP-unit2-4a%2BHACKS.ipynb#X12sdnNjb2RlLXJlbW90ZQ%3D%3D?line=14'&gt;15&lt;/a&gt;</span>     db.session.remove()

<span class="ansi-red-fg">NameError</span>: name 'IntegrityError' is not defined</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Notes">
<a class="anchor" href="#Notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes<a class="anchor-link" href="#Notes"> </a>
</h3>
<ul>
<li>Creates data into new table</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Check-for-given-Credentials-in-users-table-in-sqlite.db">
<a class="anchor" href="#Check-for-given-Credentials-in-users-table-in-sqlite.db" aria-hidden="true"><span class="octicon octicon-link"></span></a>Check for given Credentials in users table in sqlite.db<a class="anchor-link" href="#Check-for-given-Credentials-in-users-table-in-sqlite.db"> </a>
</h2>
<h2 id="&gt;-Use-of-ORM-Query-object-and-custom-methods-to-identify-user-to-credentials-uid-and-password">
<a class="anchor" href="#&gt;-Use-of-ORM-Query-object-and-custom-methods-to-identify-user-to-credentials-uid-and-password" aria-hidden="true"><span class="octicon octicon-link"></span></a>&gt; Use of ORM Query object and custom methods to identify user to credentials uid and password<a class="anchor-link" href="#&gt;-Use-of-ORM-Query-object-and-custom-methods-to-identify-user-to-credentials-uid-and-password"> </a>
</h2>
<pre><code>- Enables us to do query methdods on the data that is in our class
    - IN this case we are doing it for the user ID in the database and return only the first match.

</code></pre>
<ul>
<li>Comment on purpose of following<ol>
<li>User.query.filter_by<ul>
<li>Filter by a certain table column and return all relevant rows</li>
</ul>
</li>
<li>user.password<ul>
<li>Retrieve the password column entry for a specific row from the database</li>
</ul>
</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">find_by_date</span><span class="p">(</span><span class="n">date</span><span class="p">):</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">user</span> <span class="o">=</span> <span class="n">etrack_user</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">filter_by</span><span class="p">(</span><span class="n">_date</span><span class="o">=</span><span class="n">date</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">user</span> <span class="c1"># returns user object</span>

<span class="c1"># Check credentials by finding user and verify password</span>
<span class="c1"># def check_credentials(uid, password):</span>
<span class="c1">#     # query email and return user record</span>
<span class="c1">#     user = find_by_uid(uid)</span>
<span class="c1">#     if user == None:</span>
<span class="c1">#         return False</span>
<span class="c1">#     if (user.is_password(password)):</span>
<span class="c1">#         return True</span>
<span class="c1">#     return False</span>
        
<span class="c1">#check_credentials("indi", "123qwerty")</span>
</pre></div>

    </div>
</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Notes">
<a class="anchor" href="#Notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes<a class="anchor-link" href="#Notes"> </a>
</h3>
<ul>
<li>Function for searching for a row in the DB</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Create-a-new-User-in-table-in-Sqlite.db">
<a class="anchor" href="#Create-a-new-User-in-table-in-Sqlite.db" aria-hidden="true"><span class="octicon octicon-link"></span></a>Create a new User in table in Sqlite.db<a class="anchor-link" href="#Create-a-new-User-in-table-in-Sqlite.db"> </a>
</h2>
<blockquote>
<p>Uses SQLALchemy and custom user.create() method to add row.</p>
</blockquote>
<ul>
<li>Comment on purpose of following<ol>
<li>user.find_by_uid() and try/except<ul>
<li>find_by_uid returns the user row corresponding to a unique ID and returns None if the user does not exist. See above for try/except.</li>
</ul>
</li>
<li>user = User(...)<ul>
<li>The user object constructors (found in code)</li>
</ul>
</li>
<li>user.dob and try/except<ul>
<li>Get the dob column entry for each respective row entry</li>
</ul>
</li>
<li>user.create() and try/except<ul>
<li>Creates rows in the database with the daata that the current intance of the user created.</li>
</ul>
</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">create</span><span class="p">():</span>
    <span class="c1"># optimize user time to see if uid exists</span>
    <span class="n">date</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your date"</span><span class="p">)</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">find_by_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Found</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">user</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">return</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">pass</span> <span class="c1"># keep going</span>
    
    <span class="c1"># request value that ensure creating valid object</span>
    <span class="n">savedWorkouts</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your workout"</span><span class="p">)</span>
    
    <span class="c1"># Initialize User object before date</span>
    <span class="n">user</span> <span class="o">=</span> <span class="n">etrack_user</span><span class="p">(</span><span class="n">date</span><span class="o">=</span><span class="n">date</span><span class="p">,</span> <span class="n">savedWorkouts</span><span class="o">=</span><span class="n">savedWorkouts</span><span class="p">)</span>
           
    <span class="c1"># write object to database</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">object</span> <span class="o">=</span> <span class="n">user</span><span class="o">.</span><span class="n">create</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Created</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nb">object</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object not created</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Unknown error uid </span><span class="si">{uid}</span><span class="s2">"</span><span class="p">)</span>
        
<span class="n">create</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Created
 {'date': '26 March 2023', 'savedWorkouts': '225lb Bench'}
</pre>
</div>
</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Notes">
<a class="anchor" href="#Notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes<a class="anchor-link" href="#Notes"> </a>
</h3>
<ul>
<li>Method for creating a row</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Reading-users-table-in-sqlite.db">
<a class="anchor" href="#Reading-users-table-in-sqlite.db" aria-hidden="true"><span class="octicon octicon-link"></span></a>Reading users table in sqlite.db<a class="anchor-link" href="#Reading-users-table-in-sqlite.db"> </a>
</h2>
<blockquote>
<p>Uses SQLALchemy query.all method to read data</p>
</blockquote>
<ul>
<li>Comment on purpose of following<ol>
<li>User.query.all<ul>
<li>Returns the rows in the corresponding user class table</li>
</ul>
</li>
<li>json_ready assignment, google List Comprehension<ul>
<li>Reads the user interies in the table and storesthem in a list of python objects.</li>
</ul>
</li>
</ol>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># SQLAlchemy extracts all users from database, turns each user into JSON</span>
<span class="k">def</span> <span class="nf">read</span><span class="p">():</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="n">table</span> <span class="o">=</span> <span class="n">etrack_user</span><span class="o">.</span><span class="n">query</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
    <span class="n">json_ready</span> <span class="o">=</span> <span class="p">[</span><span class="n">user</span><span class="o">.</span><span class="n">read</span><span class="p">()</span> <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">table</span><span class="p">]</span> <span class="c1"># "List Comprehensions", for each user add user.read() to list</span>
    <span class="k">return</span> <span class="n">json_ready</span>

<span class="n">read</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>[{'date': '25 February 2023',
  'savedWorkouts': ['This is a test of the new table']},
 {'date': '25 March 2023', 'savedWorkouts': ['135 lb Bench']}]</pre>
</div>

</div>

</div>
</div>

</div>
    

<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Notes">
<a class="anchor" href="#Notes" aria-hidden="true"><span class="octicon octicon-link"></span></a>Notes<a class="anchor-link" href="#Notes"> </a>
</h3>
<ul>
<li>Method for returning all rows</li>
</ul>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h1 id="Hacks">
<a class="anchor" href="#Hacks" aria-hidden="true"><span class="octicon octicon-link"></span></a>Hacks<a class="anchor-link" href="#Hacks"> </a>
</h1>
<ul>
<li>Add this Blog to you own Blogging site.  In the Blog add notes and observations on each code cell.</li>
<li>Change blog to your own database.</li>
<li>Add additional CRUD<ul>
<li>Add Update functionality to this blog.</li>
<li>Add Delete functionality to this blog.</li>
</ul>
</li>
</ul>

</div>
</div>
</div>
    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">update</span><span class="p">():</span>
    <span class="n">date</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your date"</span><span class="p">)</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">find_by_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Found</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">pass</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span><span class="p">(</span><span class="s2">"User wasn't found"</span><span class="p">)</span>
    
    <span class="c1"># request value that ensure creating valid object</span>
    <span class="n">workout</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your workout"</span><span class="p">)</span>
           
    <span class="c1"># write object to database</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="nb">object</span> <span class="o">=</span> <span class="n">row</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">date</span><span class="p">,</span> <span class="n">workout</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Created</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="nb">object</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object not created</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Unknown error uid </span><span class="si">{uid}</span><span class="s2">"</span><span class="p">)</span>
        
<span class="n">update</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Found
 {'date': '12 March 2023', 'savedWorkouts': '2 Mile Run'}
Created
 {'date': '12 March 2023', 'savedWorkouts': '3 Mile Run'}
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">delete</span><span class="p">():</span>
    <span class="n">date</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter your date"</span><span class="p">)</span>
    <span class="n">row</span> <span class="o">=</span> <span class="n">find_by_date</span><span class="p">(</span><span class="n">date</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Found</span><span class="se">\n</span><span class="s2">"</span><span class="p">,</span> <span class="n">row</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
        <span class="k">pass</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">return</span><span class="p">(</span><span class="s2">"User wasn't found"</span><span class="p">)</span>
    
    <span class="c1"># request value that ensure creating valid object</span>
           
    <span class="c1"># write object to database</span>
    <span class="k">with</span> <span class="n">app</span><span class="o">.</span><span class="n">app_context</span><span class="p">():</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">row</span><span class="o">.</span><span class="n">delete</span><span class="p">()</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Deleted</span><span class="se">\n</span><span class="s2">"</span><span class="p">)</span>
        <span class="k">except</span><span class="p">:</span>  <span class="c1"># error raised if object not created</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">"Unknown error uid </span><span class="si">{uid}</span><span class="s2">"</span><span class="p">)</span>
        
<span class="n">delete</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Found
 {'date': '12 March 2023', 'savedWorkouts': '2 Mile Run'}
Deleted

</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">import</span> <span class="nn">sqlite3</span>

<span class="n">database</span> <span class="o">=</span> <span class="s1">'instance/sqlite.db'</span> <span class="c1"># this is location of database</span>

<span class="k">def</span> <span class="nf">schema</span><span class="p">():</span>
    
    <span class="c1"># Connect to the database file</span>
    <span class="n">conn</span> <span class="o">=</span> <span class="n">sqlite3</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">database</span><span class="p">)</span>

    <span class="c1"># Create a cursor object to execute SQL queries</span>
    <span class="n">cursor</span> <span class="o">=</span> <span class="n">conn</span><span class="o">.</span><span class="n">cursor</span><span class="p">()</span>
    
    <span class="c1"># Fetch results of Schema</span>
    <span class="n">results</span> <span class="o">=</span> <span class="n">cursor</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="s2">"PRAGMA table_info('etrack_users')"</span><span class="p">)</span><span class="o">.</span><span class="n">fetchall</span><span class="p">()</span>

    <span class="c1"># Print the results</span>
    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">results</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>

    <span class="c1"># Close the database connection</span>
    <span class="n">conn</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
    
<span class="n">schema</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>(0, '_date', 'VARCHAR(255)', 1, None, 1)
(1, '_savedWorkouts', 'BLOB', 1, None, 0)
</pre>
</div>
</div>

</div>
</div>

</div>
    

    
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">menu</span><span class="p">():</span>
    <span class="n">operation</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">"Enter: (C)reate (R)ead (U)pdate or (D)elete or (S)chema"</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">operation</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'c'</span><span class="p">:</span>
        <span class="n">create</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">operation</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'r'</span><span class="p">:</span>
        <span class="n">read</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">operation</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'u'</span><span class="p">:</span>
        <span class="n">update</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">operation</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'d'</span><span class="p">:</span>
        <span class="n">delete</span><span class="p">()</span>
    <span class="k">elif</span> <span class="n">operation</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">'s'</span><span class="p">:</span>
        <span class="n">schema</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">operation</span><span class="p">)</span><span class="o">==</span><span class="mi">0</span><span class="p">:</span> <span class="c1"># Escape Key</span>
        <span class="k">return</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"Please enter c, r, u, or d"</span><span class="p">)</span> 
    <span class="n">menu</span><span class="p">()</span> <span class="c1"># recursion, repeat menu</span>
        
<span class="k">try</span><span class="p">:</span>
    <span class="n">menu</span><span class="p">()</span> <span class="c1"># start menu</span>
<span class="k">except</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"Perform Jupyter 'Run All' prior to starting menu"</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>Created
 {'date': '16 March 2023', 'savedWorkouts': ['145 lb Overhead']}
Found
 {'date': '16 March 2023', 'savedWorkouts': ['145 lb Overhead']}
Created
 {'date': '16 March 2023', 'savedWorkouts': '150 lb Overhead'}
Found
 {'date': '16 March 2023', 'savedWorkouts': ['145 lb Overhead']}
Deleted

Perform Jupyter 'Run All' prior to starting menu
</pre>
</div>
</div>

</div>
</div>

</div>
    

</div>



  </div><a class="u-url" href="/ominicient-lavebear/2023/03/14/AP-unit2-4a+HACKS.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/ominicient-lavebear/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="https://liavb2.github.io/ominicient-lavebear/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/ominicient-lavebear/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
      </div>
      <div class="footer-col">
        <p>CSP Blogs by LB</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li>
  <a rel="me" href="” https://github.com/nighthawkcoders “" target="_blank" title="github">
    <svg class="svg-icon grey">
      <use xlink:href="/ominicient-lavebear/assets/minima-social-icons.svg#github"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="” https://twitter.com/NighthawkCoding “" target="_blank" title="twitter">
    <svg class="svg-icon grey">
      <use xlink:href="/ominicient-lavebear/assets/minima-social-icons.svg#twitter"></use>
    </svg>
  </a>
</li>
<li>
  <a rel="me" href="” https://www.youtube.com/channel/UClIKOsDS5dsfzFA3zveDT3Q “" target="_blank" title="youtube">
    <svg class="svg-icon grey">
      <use xlink:href="/ominicient-lavebear/assets/minima-social-icons.svg#youtube"></use>
    </svg>
  </a>
</li>
</ul>
</div>

  </div>

</footer>
</body>

</html>
